{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/vantai/PM25/pm-2-5-fe/components/map-component.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef } from \"react\"\nimport L from \"leaflet\"\nimport \"leaflet/dist/leaflet.css\"\nimport type { PredictionData } from \"./dashboard\"\n\ninterface MapComponentProps {\n  data: PredictionData\n}\n\nfunction getAQIColor(pm25: number): string {\n  if (pm25 <= 12) return \"#22c55e\"\n  if (pm25 <= 35) return \"#eab308\"\n  if (pm25 <= 55) return \"#f97316\"\n  if (pm25 <= 150) return \"#ef4444\"\n  return \"#a855f7\"\n}\n\nexport default function MapComponent({ data }: MapComponentProps) {\n  const mapRef = useRef<L.Map | null>(null)\n\n  useEffect(() => {\n    if (!mapRef.current) {\n      mapRef.current = L.map(\"map\").setView([10.8231, 106.6297], 11)\n\n      L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        attribution: \"© OpenStreetMap contributors\",\n        maxZoom: 19,\n      }).addTo(mapRef.current)\n    }\n\n    const map = mapRef.current\n\n    data.districts.forEach((district) => {\n      const color = getAQIColor(district.pm25_prediction)\n      const currentPM25 = district.raw_data?.air_quality?.pm2_5 || 0\n      const temp = district.raw_data?.weather?.temperature_2m || 0\n      const humidity = district.raw_data?.weather?.relative_humidity_2m || 0\n\n      L.circleMarker([district.lat, district.lon], {\n        radius: 10,\n        fillColor: color,\n        color: color,\n        weight: 2,\n        opacity: 0.8,\n        fillOpacity: 0.7,\n      })\n        .bindPopup(\n          `<div style=\"font-family: sans-serif\">\n            <strong>${district.name}</strong><br/>\n            PM2.5 Dự đoán: ${district.pm25_prediction.toFixed(1)} μg/m³<br/>\n            PM2.5 Hiện tại: ${currentPM25.toFixed(1)} μg/m³<br/>\n            Nhiệt độ: ${temp.toFixed(1)}°C<br/>\n            Độ ẩm: ${humidity.toFixed(1)}%\n          </div>`,\n        )\n        .addTo(map)\n    })\n\n    return () => {\n      // Cleanup on unmount\n    }\n  }, [data])\n\n  return (\n    <div className=\"space-y-4\">\n      <div id=\"map\" className=\"h-[600px] rounded-lg border border-slate-600\" />\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-2 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-green-500\" />\n          <span className=\"text-slate-400\">Tốt</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-yellow-500\" />\n          <span className=\"text-slate-400\">Trung bình</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-orange-500\" />\n          <span className=\"text-slate-400\">Kém</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-red-500\" />\n          <span className=\"text-slate-400\">Xấu</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-purple-500\" />\n          <span className=\"text-slate-400\">Rất xấu</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;;AAWA,SAAS,YAAY,IAAY;IAC/B,IAAI,QAAQ,IAAI,OAAO;IACvB,IAAI,QAAQ,IAAI,OAAO;IACvB,IAAI,QAAQ,IAAI,OAAO;IACvB,IAAI,QAAQ,KAAK,OAAO;IACxB,OAAO;AACT;AAEe,SAAS,aAAa,EAAE,IAAI,EAAqB;;IAC9D,MAAM,SAAS,IAAA,uKAAM,EAAe;IAEpC,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,OAAO,OAAO,GAAG,+JAAC,CAAC,GAAG,CAAC,OAAO,OAAO,CAAC;oBAAC;oBAAS;iBAAS,EAAE;gBAE3D,+JAAC,CAAC,SAAS,CAAC,sDAAsD;oBAChE,aAAa;oBACb,SAAS;gBACX,GAAG,KAAK,CAAC,OAAO,OAAO;YACzB;YAEA,MAAM,MAAM,OAAO,OAAO;YAE1B,KAAK,SAAS,CAAC,OAAO;0CAAC,CAAC;oBACtB,MAAM,QAAQ,YAAY,SAAS,eAAe;oBAClD,MAAM,cAAc,SAAS,QAAQ,EAAE,aAAa,SAAS;oBAC7D,MAAM,OAAO,SAAS,QAAQ,EAAE,SAAS,kBAAkB;oBAC3D,MAAM,WAAW,SAAS,QAAQ,EAAE,SAAS,wBAAwB;oBAErE,+JAAC,CAAC,YAAY,CAAC;wBAAC,SAAS,GAAG;wBAAE,SAAS,GAAG;qBAAC,EAAE;wBAC3C,QAAQ;wBACR,WAAW;wBACX,OAAO;wBACP,QAAQ;wBACR,SAAS;wBACT,aAAa;oBACf,GACG,SAAS,CACR,CAAC;oBACS,EAAE,SAAS,IAAI,CAAC;2BACT,EAAE,SAAS,eAAe,CAAC,OAAO,CAAC,GAAG;4BACrC,EAAE,YAAY,OAAO,CAAC,GAAG;sBAC/B,EAAE,KAAK,OAAO,CAAC,GAAG;mBACrB,EAAE,SAAS,OAAO,CAAC,GAAG;gBACzB,CAAC,EAER,KAAK,CAAC;gBACX;;YAEA;0CAAO;gBACL,qBAAqB;gBACvB;;QACF;iCAAG;QAAC;KAAK;IAET,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,IAAG;gBAAM,WAAU;;;;;;0BACxB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;;;;;;;;;;;;;;AAK3C;GAzEwB;KAAA"}}]
}